<h1 class="title-page">Gerencia AS</h1>

<div class="box-content">

	<form ng-submit="vm.setAs()">

		<div class="box-subtitle">
			<h2>Cadastro / edição de autorização de serviço</h2>
		</div>

		<ul class="nav nav-tabs" id="tabs-gerencia-as" role="tablist">

			<li class="nav-item">
				<a class="nav-link active" id="dados-do-projeto-tab" data-toggle="tab" href="#dados-do-projeto" role="tab">
					<i class="fa fa-file-text-o" aria-hidden="true"></i> AS - Dados do projeto
				</a>
			</li>

			<li class="nav-item">
				<a class="nav-link" id="as-tab" data-toggle="tab" href="#as" role="tab">
					<i class="fa fa-briefcase" aria-hidden="true"></i> AS - Comercial
				</a>
			</li>

			<li class="nav-item">
				<a class="nav-link" id="operacional-tab" data-toggle="tab" href="#operacional" role="tab">
					<i class="fa fa-cog" aria-hidden="true"></i> AS - Operacional
				</a>
			</li>

			<li class="nav-item">
				<a class="nav-link" id="faturamento-tab" data-toggle="tab" href="#faturamento" role="tab">
					<i class="fa fa-calculator" aria-hidden="true"></i> AS - Faturamento
				</a>
			</li>

			<li class="nav-item">
				<a class="nav-link" id="financeiro-tab" data-toggle="tab" href="#financeiro" role="tab">
					<i class="fa fa-dollar" aria-hidden="true"></i> AS - Financeiro
				</a>
			</li>

			<li class="nav-item">
				<a class="nav-link" id="acerto-de-contas-tab" data-toggle="tab" href="#acerto-de-contas" role="tab">
					<i class="fa fa-legal" aria-hidden="true"></i> AS - Acerto de contas
				</a>
			</li>

			<li class="nav-item">
				<a class="nav-link" id="observacoes-tab" data-toggle="tab" href="#observacoes" role="tab">
					<i class="fa fa-comments" aria-hidden="true"></i> AS - Observações
				</a>
			</li>

		</ul>


		<div class="tab-content margin-top-40">

			<!-- Dados do projeto -->
			<div class="tab-pane fade show active" id="dados-do-projeto" role="tabpanel">
				
				<div class="row">
					<div class="col-md-6">

						<div class="row">

							<div class="col-md-12">
								<div class="form-group">
									<label for="filial">Filial</label>
									<select class="form-control" name="id_empresa" ng-model="as.id_empresa" ng-change="empresa_change()">
										<option value="0">Selecionar...</option>
										<option ng-repeat="(key, val) in empresas" value="{{ val.id }}" data-prefixo="{{ val.empresa_prefixo }}">{{ val.empresa_name }}</option>
									</select>
								</div>
							</div>

							<div class="col-md-8">
								<div class="form-group">
									<label for="codigo">Código</label>
									<input type="text" class="form-control" id="codigo" placeholder="Código" ng-model="as.as_projeto_code" ng-readonly="as.id_empresa == '0' || $state.name == 'update-autorizacao-de-servico'" required>
								</div>
							</div>

							<div class="col-md-4">
								<div class="form-group">
									<label for="revisao">Revisão</label>
									<input type="text" class="form-control" id="revisao" placeholder="Revisão" ng-model="as.as_projeto_revisao" readonly>
								</div>
							</div>

							<div class="col-md-12">
								<div class="form-group">
									<label for="cliente">Cliente</label>
									<div class="input-group">
										<input type="text" class="form-control" id="cliente" placeholder="Selecione um cliente..." ng-model="as.as_projeto_cliente_nome" readonly>
										<div class="input-group-append">
											<button class="btn btn-primary" type="button" ng-click="open_choose_cliente('main_cliente')"><i class="icon-magnifier icons"></i></button>
										</div>
									</div>
								</div>
							</div>

							<div class="col-md-12">
								<div class="form-group">
									<label for="contato">Contato</label>
									<input type="text" class="form-control" id="contato" placeholder="Contato" ng-model="as.as_projeto_contato">
								</div>
							</div>

							<div class="col-md-12">
								<div class="form-group">
									<label for="email">E-mail</label>
									<input type="text" class="form-control" id="email" placeholder="E-mail" ng-model="as.as_projeto_email">
								</div>
							</div>

							<div class="col-md-6">
								<div class="form-group">
									<label for="celular-1">Celular 1</label>
									<input type="text" class="form-control" id="celular-1" placeholder="Celular 1" ng-model="as.as_projeto_phone_01" mask="(99) 9?9999-9999">
								</div>
							</div>

							<div class="col-md-6">
								<div class="form-group">
									<label for="celular-2">Celular 2</label>
									<input type="text" class="form-control" id="celular-2" placeholder="Celular 2" ng-model="as.as_projeto_phone_02" mask="(99) 9?9999-9999">
								</div>
							</div>

							<div class="col-md-6">
								<div class="form-group">
									<label for="telefone">Telefone</label>
									<input type="text" class="form-control" id="telefone" placeholder="Telefone" ng-model="as.as_projeto_phone_03" mask="(99) 9?9999-9999">
								</div>
							</div>

							<div class="col-md-6">
								<div class="form-group">
									<label for="ramal">Ramal</label>
									<input type="text" class="form-control" id="ramal" placeholder="Ramal" ng-model="as.as_projeto_ramal">
								</div>
							</div>

						</div>		

					</div>
					<div class="col-md-6">

						<div class="row">

							<div class="col-md-6">
								<div class="form-group">
									<label for="status">Status</label>
									<select class="form-control" ng-model="as.as_projeto_status">
										<option value="0">Selecionar...</option>
										<option value="em-aberto">Em aberto</option>
										<option value="carregado">Carregado</option>
										<option value="aprovado">Em viagem</option>
										<option value="em-operacao">Em operação</option>
										<option value="faturado">Faturado</option>
									</select>
								</div>
							</div>

							<div class="col-md-6">
								<div class="form-group">
									<label for="data-cadastro">Data de cadastro</label>
									<input type="date" class="form-control" id="data-cadastro" ng-model="as.as_projeto_cadastro_data_obj">
								</div>
							</div>

							<div class="col-md-12">
								<div class="form-group">
									<label for="vendedor">Vendedor</label>
									<select class="form-control" ng-model="as.id_vendedor">
										<option value="0">Selecionar...</option>
										<option ng-repeat="(key, val) in vendedores" value="{{ val.id }}">{{ val.vendedor_nome }}</option>
									</select>
								</div>
							</div>

							<div class="col-md-12">
								<div class="form-group">
									<label for="vendedor">Categoria</label>
									<select class="form-control" ng-model="as.id_categoria">
										<option value="0">Selecionar...</option>
										<option ng-repeat="(key, val) in categorias" value="{{ val.id }}">{{ val.cat_name }}</option>
									</select>
								</div>
							</div>

						</div>

						<hr />
							
						<div class="form-group">
							<label for="nome-projeto">Nome do projeto</label>
							<input type="text" class="form-control" id="nome-projeto" placeholder="Nome do projeto" ng-model="as.as_projeto_nome" required>
						</div>

						<div class="form-group">
							<label for="descricao-projeto">Descrição do projeto</label>
							<textarea class="form-control" id="descricao-projeto" ng-model="as.as_projeto_descricao"></textarea>
						</div>

					</div>

				</div>			

			</div>

			<!-- AS -->
			<div class="tab-pane fade" id="as" role="tabpanel">

				<div class="row">

					<div class="col-md-3">
				
						<div class="form-group">
							<label for="as_as_cliente_tomador">Cliente Tomador do Serviço</label>
							<div class="row mt-2">
								<div class="col-md-12">
									<input type="radio" name="as_as_cliente_tomador" ng-model="as.as_as_cliente_tomador" value="consignatario"> Consignatário / faturamento
								</div>
								<div class="col-md-12">
									<input type="radio" name="as_as_cliente_tomador" ng-model="as.as_as_cliente_tomador" value="remetente"> Remetente
								</div>
								<div class="col-md-12">
									<input type="radio" name="as_as_cliente_tomador" ng-model="as.as_as_cliente_tomador" value="destinatario"> Destinatário
								</div>
							</div>
						</div>

					</div>

					<div class="col-md-5">

						<div class="form-group">
							<label>Cliente Consignatário / faturamento:</label>
							
							<div class="input-group">
		  						<input type="text" class="form-control" placeholder="Selecionar cliente consignatário" aria-label="Recipient's username" ng-model="as.as_as_cliente_faturamento_nome">
								<div class="input-group-append">
									<button class="btn btn-primary" type="button" ng-click="open_choose_cliente('cliente_consignatario')"><i class="icon-magnifier icons"></i></button>
								</div>
							</div>

						</div>


						<div id="cliente-consignatario-details">
							<table class="table">
								<tr>
									<th width="120">CNPJ:</th>
									<td>{{ cliente_consig_data.cliente_cnpj }}</td>
								</tr>
								<tr>
									<th>Ins. Estadual:</th>
									<td>{{ cliente_consig_data.cliente_ie }}</td>
								</tr>
								<tr>
									<th>Endereço:</th>
									<td ng-if="as.as_as_id_cliente_faturamento">
										{{ cliente_consig_data.cliente_logradouro }}
										{{ cliente_consig_data.cliente_bairro }} - 
										{{ cliente_consig_data.cliente_cidade }} - 
										{{ cliente_consig_data.cliente_estado }} - 
										{{ cliente_consig_data.cliente_pais }} | 
										CEP: {{ cliente_consig_data.cliente_cep }}
									</td>
									<td ng-if="!as.as_as_id_cliente_faturamento"></td>
								</tr>
								<tr>
									<th>Nome:</th>
									<td>
										<input type="text" class="form-control" name="as_as_cliente_faturamento_contato_nome" ng-model="as.as_as_cliente_faturamento_contato_nome" placeholder="Nome do responsável">
									</td>
								</tr>
								<tr>
									<th>Telefone:</th>
									<td>
										<input type="text" class="form-control" name="as_as_cliente_faturamento_contato_telefone" ng-model="as.as_as_cliente_faturamento_contato_telefone" mask="(99) 9?9999-9999" placeholder="(DDD) + Número">
									</td>
								</tr>
								<tr>
									<th>Celular:</th>
									<td>
										<input type="text" class="form-control" name="as_as_cliente_faturamento_contato_celular" ng-model="as.as_as_cliente_faturamento_contato_celular" mask="(99) 9?9999-9999" placeholder="(DDD) + Número">
									</td>
								</tr>
								<tr>
									<th>E-mail:</th>
									<td>
										<input type="email" class="form-control" name="as_as_cliente_faturamento_contato_email" ng-model="as.as_as_cliente_faturamento_contato_email" placeholder="E-mail do responsável">
									</td>
								</tr>
							</table>
						</div>
						
					</div>

					<div class="col-md-4">

						<div class="form-group mt-3">
							<label for="as_as_forma_faturamento">Forma de Faturamento</label>

							<div class="row">
								<div class="col-md-4">
									<input type="radio" name="as_as_forma_faturamento" ng-model="as.as_as_forma_faturamento" value="cte"> CT-e
								</div>
								<div class="col-md-4">
									<input type="radio" name="as_as_forma_faturamento" ng-model="as.as_as_forma_faturamento" value="nfe"> NFE
								</div>
								<div class="col-md-4">
									<input type="radio" name="as_as_forma_faturamento" ng-model="as.as_as_forma_faturamento" value="fatura"> Fatura
								</div>
								<div class="col-md-4">
									<input type="radio" name="as_as_forma_faturamento" ng-model="as.as_as_forma_faturamento" value="nfs"> NFS
								</div>
								<div class="col-md-4">
									<input type="radio" name="as_as_forma_faturamento" ng-model="as.as_as_forma_faturamento" value="nd"> ND
								</div>
								<div class="col-md-4">
									<input type="radio" name="as_as_forma_faturamento" ng-model="as.as_as_forma_faturamento" value="outros"> Outros
								</div>
							</div>

						</div>

						<div class="form-group">
							<label for="numero-pedido-compra-as">No. Pedido de Compra</label>
							<input type="text" class="form-control" id="numero-pedido-compra-as" name="as_as_pedido_compra_numero" ng-model="as.as_as_pedido_compra_numero" placeholder="Número pedido de compra">
						</div>

						<div class="form-group">
							<label for="forma-pagamento">Forma de Pagamento</label>
						
							<div class="row">
								<div class="col-md-12">
									<input type="radio" name="as_as_forma_pagamento" ng-model="as.as_as_forma_pagamento" value="boleto"> Boleto
								</div>
								<div class="col-md-12">
									<input type="radio" name="as_as_forma_pagamento" ng-model="as.as_as_forma_pagamento" value="deposito"> Depósito
								</div>
								<div class="col-md-12">
									<input type="radio" name="as_as_forma_pagamento" ng-model="as.as_as_forma_pagamento" value="compensacao"> Compensação
								</div>
							</div>

						</div>

						<div class="form-group">
							<label for="prazo-pagamento">Prazo/Condição de pagamento</label>
							<select class="form-control" ng-model="as.as_as_prazo_pagamento_id">
								<option value="0">Selecionar...</option>
								<option ng-repeat="(key, val) in prazos_pgs" value="{{ val.id }}">{{ val.prazo_nome}}</option>
							</select>
						</div>



						<div class="form-group">
							<label for="prazo-pagamento">Contados a partir:</label>
							<select class="form-control" ng-model="as.as_as_prazo_razao_id">
								<option value="0">Selecionar...</option>
								<option ng-repeat="(key, val) in prazo_razoes" value="{{ val.id }}">{{ val.razao_nome}}</option>
							</select>
						</div>

					</div>

				</div>

				<div class="form-group">
					<label for="as_as_condicoes_comerciais">Condições Comerciais Adicionais</label>
					<textarea class="form-control" name="as_as_condicoes_comerciais" ng-model="as.as_as_condicoes_comerciais" placeholder="Condições comerciais adicionais"></textarea>
				</div>

				<div class="box-subtitle margin-top-40">
					<h2>Objeto de carregamento</h2>
				</div>

				<table class="table table-striped margin-top-20">
					<tr>
						<th class="text-center">#</th>
						<th class="text-center">Qtd.</th>
						<th>Descrição</th>
						<th>Origem / Destino</th>
						<th class="text-center">Comp.</th>
						<th class="text-center">Larg.</th>
						<th class="text-center">Alt.</th>
						<th class="text-center">Peso<br />(kg)</th>
						<th class="text-center">Valor Mercadoria</th>
						<th class="text-center">Valor</th>
						<th></th>
					</tr>
					<tr ng-repeat="(key, val) in as.as_objetos_carregamento track by key">
						<td class="text-center">
							{{ val.objeto_item }}
						</td>
						<td class="text-center">
							{{ val.objeto_quantidade }}
						</td>
						<td>
							<strong>{{ val.objeto_descricao }}</strong><br />
						</td>

						<td>
							<span>{{ val.objeto_origem }}</span><br />
							<span>{{ val.objeto_destino }}</span>
						</td>

						<td class="text-center">
							{{ val.objeto_comprimento }}
						</td>
						<td class="text-center">
						 	{{ val.objeto_largura }}
						 </td>
						 <td class="text-center">
						 	{{ val.objeto_altura }}
						 </td>
						 <td class="text-center">
							{{ val.objeto_peso_unit }}kg
						 </td>
						 <td class="text-center">
							<small>Unit:</small> {{ val.objeto_valor_mercadoria_unit | currency }}<br />
						 	<small>Total:</small> {{ val.objeto_valor_mercadoria_total | currency }}
						 </td>
						 <td class="text-center">
							<small>Unit:</small> {{ val.objeto_valor_unit | currency }}<br />
						 	<small>Total:</small> {{ val.objeto_valor_total | currency }}
						 </td>
						 <td>
							<button type="button" ng-click="edit_objeto(key)" class="btn btn-sm btn-warning"><i class="icon-pencil icons"></i></button>
							<button type="button" ng-click="remove_objeto(key)" class="btn btn-sm btn-danger"><i class="icon-trash icons"></i></button>
						 </td>
					</tr>
					<tr ng-if="as.as_objetos_carregamento.length == 0">
						<td colspan="9" class="text-center"><strong>Nenhum objeto cadastrado</strong></td>
					</tr>
					<tr>
						<th colspan="9"></th>
						<th class="text-center">Total: {{ total_as_objetos | currency }}</th>
						<th></th>
					</tr>
				</table>

				<button type="button" class="btn btn-sm btn-primary" ng-click="open_objeto_form()"><i class="fa fa-plus" aria-hidden="true"></i> Adicionar</button>

				<hr class="margin-top-40 margin-bottom-40" />

				<div class="row">
					<div class="col-md-5">

						<div class="form-group">
							<label>Inclusos no Preço Comercial</label>
						</div>

						<table class="table">
							<tr>
								<th width="130">Item</th>
								<th>Valor</th>
								<th></th>
							</tr>
							<tr ng-if="as.as_as_forma_faturamento == 'cte' || as.as_as_forma_faturamento == 'nfe'">
								<td>
									<input type="checkbox" name="as_as_incluso_comercial_icms" ng-model="as.as_as_incluso_comercial_icms"> ICMS
								</td>
								<td>
									<div class="input-group">
										<input type="text" class="form-control" ng-model="as.as_as_incluso_comercial_icms_percent" mask="99?.9?9" placeholder="Ex: 1.56" ng-disabled="!as.as_as_incluso_comercial_icms">
										<div class="input-group-append">
											<span class="input-group-text">%</span>
										</div>
									</div>
								</td>
								<td>
									<div class="input-group">
										<input type="text" class="form-control" name="as_as_incluso_comercial_icms_valor" ng-model="as.as_as_incluso_comercial_icms_valor" money-mask ng-disabled="!as.as_as_incluso_comercial_icms">
										<div class="input-group-append">
											<span class="input-group-text">R$</span>
										</div>
									</div>
								</td>
							</tr>
							<tr ng-if="
									as.as_as_forma_faturamento == 'fatura' || 
									as.as_as_forma_faturamento == 'nfs' || 
									as.as_as_forma_faturamento == 'nfe'">
								<td>
									<input type="checkbox" name="as_as_incluso_comercial_iss" ng-model="as.as_as_incluso_comercial_iss"> ISS
								</td>
								<td>
									<div class="input-group">
										<input type="text" class="form-control" ng-model="as.as_as_incluso_comercial_iss_percent" mask="99?.9?9" placeholder="Ex: 1.56" ng-disabled="!as.as_as_incluso_comercial_iss">
										<div class="input-group-append">
											<span class="input-group-text">%</span>
										</div>
									</div>
								</td>
								<td>
									<div class="input-group">
										<input type="text" class="form-control" name="as_as_incluso_comercial_iss_valor" ng-model="as.as_as_incluso_comercial_iss_valor" money-mask ng-disabled="!as.as_as_incluso_comercial_iss">
										<div class="input-group-append">
											<span class="input-group-text">R$</span>
										</div>
									</div>
								</td>
							</tr>
							<tr>
								<td>
									<input type="checkbox" name="as_as_incluso_comercial_rcfdc" ng-model="as.as_as_incluso_comercial_rcfdc"> RCFDC
								</td>
								<td>
									<div class="input-group">
										<input type="text" class="form-control" ng-model="as.as_as_incluso_comercial_rcfdc_percent" mask="99?.9?9" placeholder="Ex: 1.56" ng-disabled="!as.as_as_incluso_comercial_rcfdc">
										<div class="input-group-append">
											<span class="input-group-text">%</span>
										</div>
									</div>
								</td>
								<td>
									<div class="input-group">
										<input type="text" class="form-control" name="as_as_incluso_comercial_rcfdc_valor" ng-model="as.as_as_incluso_comercial_rcfdc_valor" money-mask ng-disabled="!as.as_as_incluso_comercial_rcfdc" readonly>
										<div class="input-group-append">
											<span class="input-group-text">R$</span>
										</div>
									</div>
								</td>
							</tr>
							<tr>
								<td>
									<input type="checkbox" name="as_as_incluso_comercial_rctrc" ng-model="as.as_as_incluso_comercial_rctrc"> RCTRC Sec/Ca
								</td>
								<td>
									<div class="input-group">
										<input type="text" class="form-control" ng-model="as.as_as_incluso_comercial_rctrc_percent" mask="99?.9?9" placeholder="Ex: 1.56" ng-disabled="!as.as_as_incluso_comercial_rctrc">
										<div class="input-group-append">
											<span class="input-group-text">%</span>
										</div>
									</div>
								</td>
								<td>
									<div class="input-group">
										<input type="text" class="form-control" name="as_as_incluso_comercial_rctrc_valor" ng-model="as.as_as_incluso_comercial_rctrc_valor" money-mask ng-disabled="!as.as_as_incluso_comercial_rctrc" readonly>
										<div class="input-group-append">
											<span class="input-group-text">R$</span>
										</div>
									</div>
								</td>
							</tr>
							<tr>
								<td>
									<input type="checkbox" name="as_as_incluso_comercial_despacho" ng-model="as.as_as_incluso_comercial_despacho"> Despacho
								</td>
								<td colspan="2">
									
									<div class="input-group">
										<input type="text" class="form-control" name="as_as_incluso_comercial_despacho_valor" ng-model="as.as_as_incluso_comercial_despacho_valor" money-mask ng-disabled="!as.as_as_incluso_comercial_despacho">
										<div class="input-group-append">
											<span class="input-group-text">R$</span>
										</div>
									</div>

								</td>
							</tr>
							<tr>
								<td>
									<input type="checkbox" name="as_as_incluso_comercial_carga" ng-model="as.as_as_incluso_comercial_carga"> Carga
								</td>
								<td colspan="2">
									<div class="input-group">
										<input type="text" class="form-control" name="as_as_incluso_comercial_carga_valor" ng-model="as.as_as_incluso_comercial_carga_valor" money-mask ng-disabled="!as.as_as_incluso_comercial_carga">
										<div class="input-group-append">
											<span class="input-group-text">R$</span>
										</div>
									</div>
								</td>
							</tr>
							<tr>
								<td>
									<input type="checkbox" name="as_as_incluso_comercial_descarga" ng-model="as.as_as_incluso_comercial_descarga"> Descarga
								</td>
								<td colspan="2">
									<div class="input-group">
										<input type="text" class="form-control" name="as_as_incluso_comercial_descarga_valor" ng-model="as.as_as_incluso_comercial_descarga_valor" money-mask ng-disabled="!as.as_as_incluso_comercial_descarga">
										<div class="input-group-append">
											<span class="input-group-text">R$</span>
										</div>
									</div>
								</td>
							</tr>
							<tr>
								<td>
									<input type="checkbox" name="as_as_incluso_comercial_estadia" ng-model="as.as_as_incluso_comercial_estadia"> Estadia
								</td>
								<td colspan="2">
									<div class="input-group">
										<input type="text" class="form-control" name="as_as_incluso_comercial_estadia_valor" ng-model="as.as_as_incluso_comercial_estadia_valor" money-mask ng-disabled="!as.as_as_incluso_comercial_estadia">
										<div class="input-group-append">
											<span class="input-group-text">R$</span>
										</div>
									</div>
								</td>
							</tr>
							<tr>
								<td>
									<input type="checkbox" name="as_as_incluso_comercial_pernoite" ng-model="as.as_as_incluso_comercial_pernoite"> Pernoite
								</td>
								<td colspan="2">
									<div class="input-group">
										<input type="text" class="form-control" name="as_as_incluso_comercial_pernoite_valor" ng-model="as.as_as_incluso_comercial_pernoite_valor" money-mask ng-disabled="!as.as_as_incluso_comercial_pernoite">
										<div class="input-group-append">
											<span class="input-group-text">R$</span>
										</div>
									</div>
								</td>
							</tr>
							<tr>
								<td>
									<input type="checkbox" name="as_as_incluso_comercial_armazenagem" ng-model="as.as_as_incluso_comercial_armazenagem"> Armazengem
								</td>
								<td colspan="2">
									<div class="input-group">
										<input type="text" class="form-control" name="as_as_incluso_comercial_armazenagem_valor" ng-model="as.as_as_incluso_comercial_armazenagem_valor" money-mask ng-disabled="!as.as_as_incluso_comercial_armazenagem">
										<div class="input-group-append">
											<span class="input-group-text">R$</span>
										</div>
									</div>
								</td>
							</tr>
							<tr>
								<td>
									<input type="checkbox" name="as_as_incluso_comercial_advalorem" ng-model="as.as_as_incluso_comercial_advalorem"> Ad valorem / Seguro
								</td>
								<td>
									<div class="input-group">
										<input type="text" class="form-control" ng-model="as.as_as_incluso_comercial_advalorem_percent" mask="99?.9?9" placeholder="Ex: 1.56" ng-disabled="!as.as_as_incluso_comercial_advalorem">
										<div class="input-group-append">
											<span class="input-group-text">%</span>
										</div>
									</div>
								</td>
								<td>
									<div class="input-group">
										<input type="text" class="form-control" name="as_as_incluso_comercial_advalorem_valor" ng-model="as.as_as_incluso_comercial_advalorem_valor" money-mask ng-disabled="!as.as_as_incluso_comercial_advalorem">
										<div class="input-group-append">
											<span class="input-group-text">R$</span>
										</div>
									</div>
								</td>
							</tr>
							
						</table>
												
					</div>

					<div class="col-md-7">

						<div class="form-group">
							<label>Valores fiscais</label>
						</div>

						<div class="form-group">

							<table class="table">
								<tr>
									<th width="90">Imposto</th>
									<th width="90">Retido</th>
									<th></th>
									<th class="text-center">%</th>
									<th class="text-center">Valor</th>
								</tr>
								<tr ng-if="as.as_as_forma_faturamento == 'cte' || as.as_as_forma_faturamento == 'nfe'">
									<td colspan="3">
										<input type="checkbox" name="as_as_incluso_contabil_icms" ng-model="as.as_as_incluso_contabil_icms"> ICMS
									</td>
									<td>
										<div class="input-group">
											<input type="text" class="form-control" ng-model="as.as_as_incluso_contabil_icms_percent" mask="99?.9?9" placeholder="Ex: 1.56" ng-disabled="!as.as_as_incluso_contabil_icms">
											<div class="input-group-append">
												<span class="input-group-text">%</span>
											</div>
										</div>
									</td>
									<td>
										<div class="input-group">
											<input type="text" class="form-control" name="as_as_incluso_contabil_icms_valor" ng-model="as.as_as_incluso_contabil_icms_valor" money-mask ng-disabled="!as.as_as_incluso_contabil_icms">
											<div class="input-group-append">
												<span class="input-group-text">R$</span>
											</div>
										</div>
									</td>
								</tr>
								<tr ng-if="
										as.as_as_forma_faturamento == 'fatura' || 
										as.as_as_forma_faturamento == 'nfs' || 
										as.as_as_forma_faturamento == 'nfe'">
									<td>
										<input type="checkbox" name="as_as_incluso_contabil_iss" ng-model="as.as_as_incluso_contabil_iss"> ISS
									</td>
									<td colspan="2">
										<input type="checkbox" name="as_as_incluso_contabil_iss_retido" ng-model="as.as_as_incluso_contabil_iss_retido" ng-disabled="!as.as_as_incluso_contabil_iss"> Retido
									</td>
									<td>
										<div class="input-group">
											<input type="text" class="form-control" ng-model="as.as_as_incluso_contabil_iss_percent" mask="99?.9?9" placeholder="Ex: 1.56" ng-disabled="!as.as_as_incluso_contabil_iss">
											<div class="input-group-append">
												<span class="input-group-text">%</span>
											</div>
										</div>
									</td>
									<td>
										<div class="input-group">
											<input type="text" class="form-control" name="as_as_incluso_contabil_iss_valor" ng-model="as.as_as_incluso_contabil_iss_valor" money-mask ng-disabled="!as.as_as_incluso_contabil_iss">
											<div class="input-group-append">
												<span class="input-group-text">R$</span>
											</div>
										</div>
									</td>
								</tr>
								<tr ng-if="
										as.as_as_forma_faturamento == 'fatura' || 
										as.as_as_forma_faturamento == 'nfs' || 
										as.as_as_forma_faturamento == 'nfe'">
									<td>
										<input type="checkbox" name="as_as_incluso_contabil_inss" ng-model="as.as_as_incluso_contabil_inss"> INSS
									</td>
									<td>
										<input type="checkbox" name="as_as_incluso_contabil_inss_retido" ng-model="as.as_as_incluso_contabil_inss_retido" ng-disabled="!as.as_as_incluso_contabil_inss"> Retido
									</td>
									<td>
										<div class="input-group">
											<input type="text" class="form-control" ng-model="as.as_as_incluso_contabil_inss_percent_root" mask="99?.9?9" placeholder="Ex: 1.56" ng-disabled="!as.as_as_incluso_contabil_inss">
											<div class="input-group-append">
												<span class="input-group-text">%</span>
											</div>
										</div>
									</td>
									<td>
										<div class="input-group">
											<input type="text" class="form-control" ng-model="as.as_as_incluso_contabil_inss_percent" mask="99?.9?9" placeholder="Ex: 1.56" ng-disabled="!as.as_as_incluso_contabil_inss">
											<div class="input-group-append">
												<span class="input-group-text">%</span>
											</div>
										</div>
									</td>
									<td>
										<div class="input-group">
											<input type="text" class="form-control" name="as_as_incluso_contabil_inss_valor" ng-model="as.as_as_incluso_contabil_inss_valor" money-mask ng-disabled="!as.as_as_incluso_contabil_inss">
											<div class="input-group-append">
												<span class="input-group-text">R$</span>
											</div>
										</div>
									</td>
								</tr>
								<tr>
									<td>
										<input type="checkbox" name="as_as_incluso_contabil_ir" ng-model="as.as_as_incluso_contabil_ir"> IR
									</td>
									<td colspan="2">
										<input type="checkbox" name="as_as_incluso_contabil_ir_retido" ng-model="as.as_as_incluso_contabil_ir_retido" ng-disabled="!as.as_as_incluso_contabil_ir"> Retido
									</td>
									<td>
										<div class="input-group">
											<input type="text" class="form-control" ng-model="as.as_as_incluso_contabil_ir_percent" mask="99?.9?9" placeholder="Ex: 1.56" ng-disabled="!as.as_as_incluso_contabil_ir">
											<div class="input-group-append">
												<span class="input-group-text">%</span>
											</div>
										</div>
									</td>
									<td>
										<div class="input-group">
											<input type="text" class="form-control" name="as_as_incluso_contabil_ir_valor" ng-model="as.as_as_incluso_contabil_ir_valor" money-mask ng-disabled="!as.as_as_incluso_contabil_ir" readonly>
											<div class="input-group-append">
												<span class="input-group-text">R$</span>
											</div>
										</div>
									</td>
								</tr>
								<tr>
									<td>
										<input type="checkbox" name="as_as_incluso_contabil_pis" ng-model="as.as_as_incluso_contabil_pis"> PIS
									</td>
									<td colspan="2">
										<input type="checkbox" name="as_as_incluso_contabil_pis_retido" ng-model="as.as_as_incluso_contabil_pis_retido" ng-disabled="!as.as_as_incluso_contabil_pis"> Retido
									</td>
									<td>
										<div class="input-group">
											<input type="text" class="form-control" ng-model="as.as_as_incluso_contabil_pis_percent" mask="99?.9?9" placeholder="Ex: 1.56" ng-disabled="!as.as_as_incluso_contabil_pis">
											<div class="input-group-append">
												<span class="input-group-text">%</span>
											</div>
										</div>
									</td>
									<td>
										<div class="input-group">
											<input type="text" class="form-control" name="as_as_incluso_contabil_pis_valor" ng-model="as.as_as_incluso_contabil_pis_valor" money-mask ng-disabled="!as.as_as_incluso_contabil_pis" readonly>
											<div class="input-group-append">
												<span class="input-group-text">R$</span>
											</div>
										</div>
									</td>
								</tr>
								<tr>
									<td>
										<input type="checkbox" name="as_as_incluso_contabil_cofins" ng-model="as.as_as_incluso_contabil_cofins"> COFINS
									</td>
									<td colspan="2">
										<input type="checkbox" name="as_as_incluso_contabil_cofins_retido" ng-model="as.as_as_incluso_contabil_cofins_retido" ng-disabled="!as.as_as_incluso_contabil_cofins"> Retido
									</td>
									<td>
										<div class="input-group">
											<input type="text" class="form-control" ng-model="as.as_as_incluso_contabil_cofins_percent" mask="99?.9?9" placeholder="Ex: 1.56" ng-disabled="!as.as_as_incluso_contabil_cofins">
											<div class="input-group-append">
												<span class="input-group-text">%</span>
											</div>
										</div>
									</td>
									<td>
										<div class="input-group">
											<input type="text" class="form-control" name="as_as_incluso_contabil_cofins_valor" ng-model="as.as_as_incluso_contabil_cofins_valor" money-mask ng-disabled="!as.as_as_incluso_contabil_cofins" readonly>
											<div class="input-group-append">
												<span class="input-group-text">R$</span>
											</div>
										</div>
									</td>
								</tr>
								<tr>
									<td>
										<input type="checkbox" name="as_as_incluso_contabil_csll" ng-model="as.as_as_incluso_contabil_csll"> CSLL
									</td>
									<td colspan="2">
										<input type="checkbox" name="as_as_incluso_contabil_csll_retido" ng-model="as.as_as_incluso_contabil_csll_retido" ng-disabled="!as.as_as_incluso_contabil_csll"> Retido
									</td>
									<td>
										<div class="input-group">
											<input type="text" class="form-control" ng-model="as.as_as_incluso_contabil_csll_percent" mask="99?.9?9" placeholder="Ex: 1.56" ng-disabled="!as.as_as_incluso_contabil_csll">
											<div class="input-group-append">
												<span class="input-group-text">%</span>
											</div>
										</div>
									</td>
									<td>
										<div class="input-group">
											<input type="text" class="form-control" name="as_as_incluso_contabil_csll_valor" ng-model="as.as_as_incluso_contabil_csll_valor" money-mask ng-disabled="!as.as_as_incluso_contabil_csll" readonly>
											<div class="input-group-append">
												<span class="input-group-text">R$</span>
											</div>
										</div>
									</td>
								</tr>
								<tr>
									<td>
										<input type="checkbox" name="as_as_incluso_contabil_cp" ng-model="as.as_as_incluso_contabil_cp"> CP
									</td>
									<td colspan="2"></td>
									<td>
										<div class="input-group">
											<input type="text" class="form-control" ng-model="as.as_as_incluso_contabil_cp_percent" mask="99?.9?9" placeholder="Ex: 1.56" ng-disabled="!as.as_as_incluso_contabil_cp">
											<div class="input-group-append">
												<span class="input-group-text">%</span>
											</div>
										</div>
									</td>
									<td>

										<div class="input-group">
											<input type="text" class="form-control" name="as_as_incluso_contabil_cp_valor" ng-model="as.as_as_incluso_contabil_cp_valor" money-mask ng-disabled="!as.as_as_incluso_contabil_cp" readonly>
											<div class="input-group-append">
												<span class="input-group-text">R$</span>
											</div>
										</div>

									</td>
								</tr>
								<tr>
									<th colspan="4" class="text-right">Total retido:</th>
									<td>
										<div class="input-group">
											<input type="text" class="form-control" name="as_as_incluso_contabil_valor_retido" ng-model="as.as_as_incluso_contabil_valor_retido" money-mask readonly>
											<div class="input-group-append">
												<span class="input-group-text">R$</span>
											</div>
										</div>
									</td>
								</tr>

							</table>

						</div>

					</div>
				</div>

							

			</div>

			<!-- Operacional -->
			<div class="tab-pane fade" id="operacional" role="tabpanel">
				
				<div class="row">

					<div class="col-md-6">

						<div class="form-group">
							<label for="as_op_cliente_remetente_nome">Cliente remetente:</label>

							<div class="input-group">
		  						<input type="text" class="form-control" placeholder="Selecionar cliente remetente" id="as_op_cliente_remetente_nome" ng-model="as.as_op_cliente_remetente_nome">
								<div class="input-group-append">
									<button class="btn btn-primary" type="button" ng-click="open_choose_cliente('cliente_remetente')"><i class="icon-magnifier icons"></i></button>
								</div>
							</div>

						</div>

						<div class="mt-3" id="cliente-remetente-details">
							<table class="table">
								<tr>
									<th width="120">CNPJ:</th>
									<td>{{ cliente_remetente_data.cliente_cnpj }}</td>
								</tr>
								<tr>
									<th>Ins. Estadual:</th>
									<td>{{ cliente_remetente_data.cliente_ie }}</td>
								</tr>
								<tr>
									<th>Endereço:</th>
									<td ng-if="as.as_op_id_cliente_remetente">
										{{ cliente_remetente_data.cliente_logradouro }}
										{{ cliente_remetente_data.cliente_bairro }} -
										{{ cliente_remetente_data.cliente_cidade }} - 
										{{ cliente_remetente_data.cliente_estado }} - 
										{{ cliente_remetente_data.cliente_pais }} | 
										CEP: {{ cliente_remetente_data.cliente_cep }}
									</td>
									<td ng-if="!as.as_op_id_cliente_remetente"></td>
								</tr>
								<tr>
									<th>Nome:</th>
									<td>
										<input type="text" class="form-control" name="as_op_cliente_remetente_contato_nome" ng-model="as.as_op_cliente_remetente_contato_nome" placeholder="Nome do responsável">
									</td>
								</tr>
								<tr>
									<th>Telefone:</th>
									<td>
										<input type="text" class="form-control" name="as_op_cliente_remetente_contato_telefone" ng-model="as.as_op_cliente_remetente_contato_telefone" mask="(99) 9?9999-9999" placeholder="(DDD) + Número">
									</td>
								</tr>
								<tr>
									<th>Celular:</th>
									<td>
										<input type="text" class="form-control" name="as_op_cliente_remetente_contato_celular" ng-model="as.as_op_cliente_remetente_contato_celular" mask="(99) 9?9999-9999" placeholder="(DDD) + Número">
									</td>
								</tr>
								<tr>
									<th>E-mail:</th>
									<td>
										<input type="email" class="form-control" name="as_op_cliente_remetente_contato_email" ng-model="as.as_op_cliente_remetente_contato_email" placeholder="E-mail do responsável">
									</td>
								</tr>
							</table>
						</div>
						
					</div>

					<div class="col-md-6">

						<div class="form-group">
							<label>Cliente destinatário:</label>
							
							<div class="input-group">
		  						<input type="text" class="form-control" placeholder="Selecionar cliente destinatário" aria-label="Recipient's username" ng-model="as.as_op_cliente_destinatario_nome">
								<div class="input-group-append">
									<button class="btn btn-primary" type="button" ng-click="open_choose_cliente('cliente_destinatario')"><i class="icon-magnifier icons"></i></button>
								</div>
							</div>

						</div>

						<div class="mt-3" id="cliente-destinatario-details">

							<table class="table">
								<tr>
									<th width="120">CNPJ:</th>
									<td>{{ cliente_destinatario_data.cliente_cnpj }}</td>
								</tr>
								<tr>
									<th>Ins. Estadual:</th>
									<td>{{ cliente_destinatario_data.cliente_ie }}</td>
								</tr>
								<tr>
									<th>Endereço:</th>
									<td ng-if="as.as_op_id_cliente_destinatario">
										{{ cliente_destinatario_data.cliente_logradouro }}
										{{ cliente_destinatario_data.cliente_bairro }} -
										{{ cliente_destinatario_data.cliente_cidade }} - 
										{{ cliente_destinatario_data.cliente_estado }} - 
										{{ cliente_destinatario_data.cliente_pais }} | 
										CEP: {{ cliente_destinatario_data.cliente_cep }}
									</td>
									<td ng-if="!as.as_op_id_cliente_destinatario"></td>
								</tr>
								<tr>
									<th>Nome:</th>
									<td>
										<input type="text" class="form-control" name="as_op_cliente_destinatario_contato_nome" ng-model="as.as_op_cliente_destinatario_contato_nome" placeholder="Nome do responsável">
									</td>
								</tr>
								<tr>
									<th>Telefone:</th>
									<td>
										<input type="text" class="form-control" name="as_op_cliente_destinatario_contato_telefone" ng-model="as.as_op_cliente_destinatario_contato_telefone" mask="(99) 9?9999-9999" placeholder="(DDD) + Número">
									</td>
								</tr>
								<tr>
									<th>Celular:</th>
									<td>
										<input type="text" class="form-control" name="as_op_cliente_destinatario_contato_celular" ng-model="as.as_op_cliente_destinatario_contato_celular" mask="(99) 9?9999-9999" placeholder="(DDD) + Número">
									</td>
								</tr>
								<tr>
									<th>E-mail:</th>
									<td>
										<input type="email" class="form-control" name="as_op_cliente_destinatario_contato_email" ng-model="as.as_op_cliente_destinatario_contato_email" placeholder="E-mail do responsável">
									</td>
								</tr>
							</table>
							
						</div>
						
					</div>

				</div>

				<hr class="margin-top-40 margin-bottom-40" />

				<div class="box-subtitle">
					<h2>Dados da carga</h2>
				</div>

				<table class="table table-striped margin-top-20">
					<tr>
						<th class="text-center">Nº</th>
						<th>Nota fiscal</th>
						<th>Qtd.</th>
						<th class="text-center">Mercadoria</th>
						<th class="text-center">Espécie</th>
						<th class="text-center">Comp.<br />(m)</th>
						<th class="text-center">Larg.<br />(m)</th>
						<th class="text-center">Alt.<br />(m)</th>
						<th class="text-center">Peso.<br />(kg)</th>
						<th class="text-center">Valor</th>
						<th class="text-center">Frete peso</th>
						<th></th>
					</tr>
					<tr ng-repeat="(key, val) in as.as_dados_carga">
						<td>{{ val.dado_numero }}</td>
						<td>{{ val.dado_nota_fiscal }}</td>
						<td>{{ val.dado_quantidade }}</td>
						<td>{{ val.dado_mercadoria }}</td>
						<td>{{ val.dado_especie }}</td>
						<td>{{ val.dado_comprimento }}</td>
						<td>{{ val.dado_largura }}</td>
						<td>{{ val.dado_altura }}</td>
						<td>{{ val.dado_peso }}</td>
						<td>{{ val.dado_valor | currency }}</td>
						<td>{{ val.dado_frete_peso }}</td>
						<td>
							<button type="button" ng-click="edit_carga(key)" class="btn btn-sm btn-warning"><i class="icon-pencil icons"></i></button>
							<button type="button" ng-click="remove_carga(key)" class="btn btn-sm btn-danger"><i class="icon-trash icons"></i></button>
						</td>
					</tr>
					<tr ng-if="as.as_dados_carga.length == 0">
						<td colspan="11" class="text-center"><strong>Nenhuma carga cadastrada</strong></td>
					</tr>
					<tr>
						<th colspan="10"></th>
						<th class="text-center"></th>
						<th></th>
					</tr>
				</table>

				<button type="button" class="btn btn-sm btn-primary" ng-click="open_carga_form()"><i class="fa fa-plus" aria-hidden="true"></i> Adicionar</button>

				<hr class="margin-top-40 margin-bottom-40" />

				<div class="row">
					<div class="col-md-4">

						<div class="form-group">
							<div class="row">
								<div class="col-md-6">
									<label>Local de coleta:</label>
								</div>
								<div class="col-md-6 text-right">
									<input type="checkbox" name=""> Exterior
								</div>
							</div>
							
							<div class="input-group my-3">
		  						<input type="text" class="form-control" placeholder="Selecionar local de coleta" aria-label="Recipient's username" ng-model="as.as_op_local_coleta_nome">
								<div class="input-group-append">
									<button class="btn btn-primary" type="button" ng-click="open_choose_local('local_coleta')"><i class="icon-magnifier icons"></i></button>
								</div>
							</div>

						</div>

						<div class="mt-3" id="local-coleta-details">
							<table class="table">
								<tr>
									<th>Apelido</th>
									<td>{{ local_coleta_data.local_apelido }}</td>
								</tr>
								<tr>
									<th width="120">CNPJ:</th>
									<td>{{ local_coleta_data.local_cnpj }}</td>
								</tr>
								<tr>
									<th>Endereço:</th>
									<td ng-if="as.as_op_id_local_coleta">
										{{ local_coleta_data.local_logradouro }}
										{{ local_coleta_data.local_bairro }} -
										{{ local_coleta_data.local_cidade }} - 
										{{ local_coleta_data.local_estado }} - 
										{{ local_coleta_data.local_pais }} | 
										CEP: {{ local_coleta_data.local_cep }}
									</td>
									<td ng-if="!as.as_op_id_local_coleta"></td>
								</tr>
								<tr>
									<th>Nome:</th>
									<td>
										<input type="text" class="form-control" name="as_op_local_coleta_contato" ng-model="as.as_op_local_coleta_contato" placeholder="Nome do responsável">
									</td>
								</tr>
								<tr>
									<th>Telefone:</th>
									<td>
										<input type="text" class="form-control" name="as_op_local_coleta_contato_telefone" ng-model="as.as_op_local_coleta_contato_telefone" mask="(99) 9?9999-9999" placeholder="(DDD) + Número">
									</td>
								</tr>
								<tr>
									<th>Celular:</th>
									<td>
										<input type="text" class="form-control" name="as_op_local_coleta_contato_celular" ng-model="as.as_op_local_coleta_contato_celular" mask="(99) 9?9999-9999" placeholder="(DDD) + Número">
									</td>
								</tr>
								<tr>
									<th>E-mail:</th>
									<td>
										<input type="email" class="form-control" name="as_op_local_coleta_contato_email" ng-model="as.as_op_local_coleta_contato_email" placeholder="E-mail do responsável">
									</td>
								</tr>

							</table>
						</div>						

					</div>
					<div class="col-md-4">

						<div class="form-group">
							<div class="row">
								<div class="col-md-6">
									<label>Local da entrega:</label>
								</div>
								<div class="col-md-6 text-right">
									<input type="checkbox" name=""> Exterior
								</div>
							</div>
							
							<div class="input-group my-3">
		  						<input type="text" class="form-control" placeholder="Selecionar local de entrega" aria-label="Recipient's username" ng-model="as.as_op_local_entrega_nome">
								<div class="input-group-append">
									<button class="btn btn-primary" type="button" ng-click="open_choose_local('local_entrega')"><i class="icon-magnifier icons"></i></button>
								</div>
							</div>

						</div>

						<div class="mt-3" id="local-entrega-details">
							<table class="table">
								<tr>
									<th>Apelido</th>
									<td>{{ local_entrega_data.local_apelido }}</td>
								</tr>
								<tr>
									<th width="120">CNPJ:</th>
									<td>{{ local_entrega_data.local_cnpj }}</td>
								</tr>
								<tr>
									<th>Endereço:</th>
									<td ng-if="as.as_op_id_local_entrega">
										{{ local_entrega_data.local_logradouro }}
										{{ local_entrega_data.local_bairro }} -
										{{ local_entrega_data.local_cidade }} - 
										{{ local_entrega_data.local_estado }} - 
										{{ local_entrega_data.local_pais }} | 
										CEP: {{ local_entrega_data.local_cep }}
									</td>
									<td ng-if="!as.as_op_id_local_entrega"></td>
								</tr>
								<tr>
									<th>Nome:</th>
									<td>
										<input type="text" class="form-control" name="as_op_local_entrega_contato" ng-model="as.as_op_local_entrega_contato" placeholder="Nome do responsável">
									</td>
								</tr>
								<tr>
									<th>Telefone:</th>
									<td>
										<input type="text" class="form-control" name="as_op_local_entrega_contato_telefone" ng-model="as.as_op_local_entrega_contato_telefone" mask="(99) 9?9999-9999" placeholder="(DDD) + Número">
									</td>
								</tr>
								<tr>
									<th>Celular:</th>
									<td>
										<input type="text" class="form-control" name="as_op_local_entrega_contato_celular" ng-model="as.as_op_local_entrega_contato_celular" mask="(99) 9?9999-9999" placeholder="(DDD) + Número">
									</td>
								</tr>
								<tr>
									<th>E-mail:</th>
									<td>
										<input type="email" class="form-control" name="as_op_local_entrega_contato_email" ng-model="as.as_op_local_entrega_contato_email" placeholder="E-mail do responsável">
									</td>
								</tr>
							</table>
						</div>

					</div>
					<div class="col-md-4">

						<div class="form-group">
							<label>CFOP:</label>
							<div class="input-group my-3">
		  						<input type="text" class="form-control" placeholder="Selecionar CFOP" ng-model="cfop_data.cfop_descricao" readonly>
								<div class="input-group-append">
									<button class="btn btn-primary" type="button" ng-click="open_choose_cfop('operacional_cfop')"><i class="icon-magnifier icons"></i></button>
								</div>
							</div>

						</div>


						<div class="form-group">
							<label for="as_op_observacao">Observações para o Operacional</label>
							<textarea class="form-control" id="as_op_observacao" ng-model="as.as_op_observacao"></textarea>
						</div>

						<div class="form-group">
							<label for="as_op_data_carregamento">Data de carregamento:</label>
							<div class="input-group">
		  						<input type="date" class="form-control" id="as_op_data_carregamento" placeholder="Data de carregamento" aria-label="Recipient's username" ng-model="as.as_op_data_carregamento_obj">
								<div class="input-group-append">
									<button class="btn btn-primary" type="button">Carregado</button>
								</div>
							</div>
						</div>

						<div class="form-group">
							<label for="as_op_data_previsao">Previsão de Entrega:</label>
							<input type="date" class="form-control" id="as_op_data_previsao" ng-model="as.as_op_data_previsao_obj">
						</div>

						<div class="form-group">
							<label for="as_op_equipamentos">Equipamento a ser utilizado</label>
							<textarea class="form-control" id="as_op_equipamentos" ng-model="as.as_op_equipamentos"></textarea>
						</div>


					</div>
				</div>

				<div class="row">
					<div class="col-md-8">

						<div class="form-group">
							
							<label for="as_op_equipamentos">Taxas e licenças</label>

							<div class="card">
  								<div class="card-body">

									<table class="table table-striped">
										<tr>
											<th>Provisionamento</th>
											<th class="text-center">Tipo</th>
											<th class="text-center">Valor</th>
											<th width="90"></th>
										</tr>
										<tr ng-repeat="(key, val) in as.as_taxas_licencas">
											<td>{{ val.taxa_code }}</td>
											<td class="text-center">{{ val.taxa_tipo_text }}</td>
											<td class="text-center">{{ val.taxa_valor | currency }}</td>
											<td class="text-right">
												<button type="button" class="btn btn-sm btn-warning" ng-click="edit_taxa(key)">
													<i class="icon-pencil icons"></i>
												</button>
												<button type="button" class="btn btn-sm btn-danger" ng-click="remove_taxa(key)">
													<i class="icon-trash icons"></i>
												</button>
											</td>
										</tr>
										<tr ng-if="as.as_taxas_licencas.length == 0">
											<td colspan="4" class="text-center">Nenhuma taxa/licença associada.</td>
										</tr>
										<tr>
											<th colspan="2"></th>
											<th class="text-center">Total: {{ as_taxas_licencas_total | currency}}</th>
											<th></th>
										</tr>
									</table>

									<button type="button" class="btn btn-sm btn-success" ng-click="open_insert_taxa('insert_taxa')">Adicionar</button>

								</div>
							</div>
							
						</div>

					</div>
					<div class="col-md-4">

						<div class="form-group">
							
							<label for="as_op_equipamentos">Associação de frota</label>

							<div class="card">
  								<div class="card-body">

									<table class="table table-striped">
										<tr>
											<th>Frota</th>
											<th width="35"></th>
										</tr>
										<tr ng-repeat="(key, val) in as.as_assoc_frotas">
											<td><strong>{{ val.veiculo_frota }}</strong> - {{ val.veiculo_modelo }}</td>
											<td class="text-center">
												<button type="button" class="btn btn-sm btn-danger" ng-click="remove_veiculo(key)"><i class="icon-trash icons"></i></button>
											</td>
										</tr>
										<tr ng-if="as.as_assoc_frotas.length == 0">
											<td colspan="2" class="text-center">Nenhum veículo associado.</td>
										</tr>
									</table>

									<button type="button" class="btn btn-sm btn-success" ng-click="open_choose_veiculos('assoc_frota')">Adicionar</button>

								</div>
							</div>
							
						</div>


						<div class="form-group">
							
							<label for="as_op_motoristas">Associação de motorista</label>

							<div class="card">
  								<div class="card-body">

									<table class="table table-striped">
										<tr>
											<th>Motorista</th>
											<th width="35"></th>
										</tr>
										<tr ng-repeat="(key, val) in as.as_assoc_motoristas">
											<td><strong>{{ val.motorista_nome }}</strong><br />{{ val.motorista_cpf }}</td>
											<td class="text-center">
												<button type="button" class="btn btn-sm btn-danger" ng-click="remove_motorista(key)"><i class="icon-trash icons"></i></button>
											</td>
										</tr>
										<tr ng-if="as.as_assoc_motoristas.length == 0">
											<td colspan="2" class="text-center">Nenhum motorista associado.</td>
										</tr>
									</table>

									<button type="button" class="btn btn-sm btn-success" ng-click="open_choose_motoristas('assoc_motorista')">Adicionar</button>

								</div>
							</div>
							
						</div>

					</div>
				</div>

				<div class="row my-3">
					<div class="col-md-12">

						<button class="btn btn-primary">Emitir OCC</button>

						<button class="btn btn-primary" ng-if="as.as_as_forma_faturamento == 'cte'">Emitir CTE</button>

						<button class="btn btn-primary" ng-if="as.as_as_forma_faturamento == 'nfs' || as.as_as_forma_faturamento == 'nfe'">Emitir OS</button>

						<button class="btn btn-primary" ng-if="as.as_as_forma_faturamento == 'nd'">Emitir Nota de Débito</button>

						<button class="btn btn-primary" ng-if="as.as_as_forma_faturamento == 'fatura'">Emitir Fatura</button>

						<button class="btn btn-primary" ng-if="as.as_as_forma_faturamento == 'outros'">Emitir Recibo</button>

					</div>
				</div>

			</div>

			<!-- Faturamento -->
			<div class="tab-pane fade" id="faturamento" role="tabpanel">
				
				<div class="row">
					<div class="col-md-4">

						<div class="form-group">
							<label>Faturamento</label>
							
							<div class="input-group my-3">
		  						<input type="text" class="form-control" placeholder="Sel. cliente faturamento" aria-label="Recipient's username" ng-model="as.as_fat_cliente_faturamento_nome">
								<div class="input-group-append">
									<button class="btn btn-primary" type="button" ng-click="open_choose_cliente('cliente_faturamento')"><i class="icon-magnifier icons"></i></button>
								</div>
							</div>

						</div>

						<div class="mt-3" id="faturamento-details">
							<table class="table">
								<tr>
									<th width="120">CNPJ:</th>
									<td>{{ cliente_faturamento_data.cliente_cnpj }}</td>
								</tr>
								<tr>
									<th>Ins. Estadual:</th>
									<td>{{ cliente_faturamento_data.cliente_ie }}</td>
								</tr>
								<tr>
									<th>Endereço:</th>
									<td ng-if="as.as_fat_id_cliente_faturamento">
										{{ cliente_faturamento_data.cliente_logradouro }}
										{{ cliente_faturamento_data.cliente_bairro }} - 
										{{ cliente_faturamento_data.cliente_cidade }} - 
										{{ cliente_faturamento_data.cliente_estado }} - 
										{{ cliente_faturamento_data.cliente_pais }} | 
										CEP: {{ cliente_faturamento_data.cliente_cep }}
									</td>
									<td ng-if="!as.as_fat_id_cliente_faturamento"></td>
								</tr>
								<tr>
									<th>Nome:</th>
									<td><input type="text" class="form-control" name="as_fat_cliente_faturamento_contato_nome" ng-model="as.as_fat_cliente_faturamento_contato_nome" placeholder="Nome do responsável"></td>
								</tr>
								<tr>
									<th>Telefone:</th>
									<td><input type="text" class="form-control" name="as_fat_cliente_faturamento_contato_telefone" ng-model="as.as_fat_cliente_faturamento_contato_telefone" mask="(99) 9?9999-9999" placeholder="(DDD) + Número"></td>
								</tr>
								<tr>
									<th>Celular:</th>
									<td><input type="text" class="form-control" name="as_fat_cliente_faturamento_contato_celular" ng-model="as.as_fat_cliente_faturamento_contato_celular" mask="(99) 9?9999-9999" placeholder="(DDD) + Número"></td>
								</tr>
								<tr>
									<th>E-mail:</th>
									<td><input type="email" class="form-control" name="as_fat_cliente_faturamento_contato_email" ng-model="as.as_fat_cliente_faturamento_contato_email" placeholder="E-mail do responsável"></td>
								</tr>
							</table>
						</div>

						<div class="form-group mt-3">
							<label for="as_as_forma_faturamento">Forma de Faturamento</label>

							<div class="row">
								<div class="col-md-4">
									<input type="radio" name="as_fat_forma_faturamento" ng-model="as.as_fat_forma_faturamento" value="cte"> CT-e
								</div>
								<div class="col-md-4">
									<input type="radio" name="as_fat_forma_faturamento" ng-model="as.as_fat_forma_faturamento" value="nfe"> NFE
								</div>
								<div class="col-md-4">
									<input type="radio" name="as_fat_forma_faturamento" ng-model="as.as_fat_forma_faturamento" value="fatura"> Fatura
								</div>
								<div class="col-md-4">
									<input type="radio" name="as_fat_forma_faturamento" ng-model="as.as_fat_forma_faturamento" value="nfs"> NFS
								</div>
								<div class="col-md-4">
									<input type="radio" name="as_fat_forma_faturamento" ng-model="as.as_fat_forma_faturamento" value="nd"> ND
								</div>
								<div class="col-md-4">
									<input type="radio" name="as_fat_forma_faturamento" ng-model="as.as_fat_forma_faturamento" value="outros"> Outros
								</div>
							</div>

						</div>

						<div class="form-group">
							<label for="numero-pedido-compra-as-faturamento">No. Pedido de Compra</label>
							<input type="text" class="form-control" id="numero-pedido-compra-as-faturamento" name="as_as_pedido_compra_numero" ng-model="as.as_as_pedido_compra_numero" placeholder="Número pedido de compra">
						</div>

						<div class="form-group">
							<label for="forma-pagamento">Forma de Pagamento</label>
						
							<div class="row">
								<div class="col-md-12">
									<input type="radio" name="as_fat_forma_pagamento" ng-model="as.as_fat_forma_pagamento" value="boleto"> Boleto
								</div>
								<div class="col-md-12">
									<input type="radio" name="as_fat_forma_pagamento" ng-model="as.as_fat_forma_pagamento" value="deposito"> Depósito
								</div>
								<div class="col-md-12">
									<input type="radio" name="as_fat_forma_pagamento" ng-model="as.as_fat_forma_pagamento" value="compensacao"> Compensação
								</div>
							</div>

						</div>

						<div class="form-group">
							<label for="prazo-pagamento">Prazo/Condição de pagamento</label>
							<select class="form-control" ng-model="as.as_as_prazo_pagamento_id">
								<option value="0">Selecionar...</option>
								<option ng-repeat="(key, val) in prazos_pgs" value="{{ val.id }}">{{ val.prazo_nome}}</option>
							</select>
						</div>

						<div class="form-group">
							<label for="as_fat_data_faturamento">Data de vencimento:</label>
							<input type="date" class="form-control" id="as_fat_data_vencimento" ng-model="as.as_fat_data_vencimento_obj">
						</div>

						<div class="form-group">
							<label for="as_fat_valor_total_as_bruto">Valor total da A.S. bruto</label>
							<input type="text" class="form-control" id="as_fat_valor_total_as_bruto" ng-model="as.as_fat_valor_total_as_bruto" money-mask readonly>
						</div>

						<div class="form-group">
							<label for="as_fat_valor_total_as_liquido">Valor total liquido à cobrar</label>
							<input type="text" class="form-control" id="as_fat_valor_total_as_liquido" ng-model="as.as_fat_valor_total_as_liquido" money-mask readonly>
						</div>

					</div>
					<div class="col-md-4">

						<div class="form-group">
							<label for="as_fat_obs_faturamento">Observações para o Faturamento</label>
							<textarea class="form-control" name="as_fat_obs_faturamento" ng-model="as.as_fat_obs_faturamento"></textarea>
						</div>

						<div class="form-group">
							<label for="as_fat_data_faturamento">Data do Faturamento:</label>
							<input type="date" class="form-control" id="as_fat_data_faturamento" ng-model="as.as_fat_data_faturamento_obj">
						</div>

						<div class="form-group">
							<label for="as_fat_data_envio">Data do envio:</label>
							<input type="date" class="form-control" id="as_fat_data_envio" ng-model="as.as_fat_data_envio_obj">
						</div>

						<div class="form-group">
							<label for="as_fat_tipo_envio">Tipo do envio:</label>
							<input type="text" class="form-control" id="as_fat_tipo_envio" ng-model="as.as_fat_tipo_envio">
						</div>
						
					</div>
					<div class="col-md-4">
						
						<div class="form-group">
							<label for="as_fat_id_cliente_cobranca">Cobrança</label>
							
							<div class="input-group my-3">
		  						<input type="text" class="form-control" placeholder="Sel. cliente cobrança" ng-model="as.as_fat_cliente_cobranca_nome">
								<div class="input-group-append">
									<button class="btn btn-primary" type="button" ng-click="open_choose_cliente('cliente_cobranca')"><i class="icon-magnifier icons"></i></button>
								</div>
							</div>

						</div>

						<div class="mt-3" id="cobranca-details">
							<table class="table">
								<tr>
									<th width="120">CNPJ:</th>
									<td>{{ cliente_cobranca_data.cliente_cnpj }}</td>
								</tr>
								<tr>
									<th>Ins. Estadual:</th>
									<td>{{ cliente_cobranca_data.cliente_ie }}</td>
								</tr>
								<tr>
									<th>Endereço:</th>
									<td ng-if="as.as_fat_id_cliente_cobranca">
										{{ cliente_cobranca_data.cliente_logradouro }}
										{{ cliente_cobranca_data.cliente_bairro }} - 
										{{ cliente_cobranca_data.cliente_cidade }} - 
										{{ cliente_cobranca_data.cliente_estado }} - 
										{{ cliente_cobranca_data.cliente_pais }} | 
										CEP: {{ cliente_cobranca_data.cliente_cep }}
									</td>
									<td ng-if="!as.as_fat_id_cliente_cobranca"></td>
								</tr>
								<tr>
									<th>Nome:</th>
									<td><input type="text" class="form-control" name="as_fat_cliente_cobranca_contato_nome" ng-model="as.as_fat_cliente_cobranca_contato_nome" placeholder="Nome do responsável"></td>
								</tr>
								<tr>
									<th>Telefone:</th>
									<td><input type="text" class="form-control" name="as_fat_cliente_cobranca_contato_telefone" ng-model="as.as_fat_cliente_cobranca_contato_telefone" mask="(99) 9?9999-9999" placeholder="(DDD) + Número"></td>
								</tr>
								<tr>
									<th>Celular:</th>
									<td><input type="text" class="form-control" name="as_fat_cliente_cobranca_contato_celular" ng-model="as.as_fat_cliente_cobranca_contato_celular" mask="(99) 9?9999-9999" placeholder="(DDD) + Número"></td>
								</tr>
								<tr>
									<th>E-mail:</th>
									<td><input type="email" class="form-control" name="as_fat_cliente_cobranca_contato_email" ng-model="as.as_fat_cliente_cobranca_contato_email" placeholder="E-mail do responsável"></td>
								</tr>
							</table>
						</div>

						<div class="form-group mt-3">
							<label for="as_fat_obs_financeiro">Observações para o Financeiro</label>
							<textarea id="as_fat_obs_financeiro" ng-model="as.as_fat_obs_financeiro" class="form-control"></textarea>
						</div>

					</div>
				</div>

				<!-- 

				<button class="btn btn-secondary">Emitir a fatura</button>

				<button class="btn btn-secondary">Emitir NF de serviço</button>

				<button class="btn btn-secondary">Emitir NF-e</button>

				<button class="btn btn-secondary">Emitir nota de débito</button>

				<button class="btn btn-secondary">Emitir outros</button>

				-->

				<button class="btn btn-primary" type="button">Faturar</button>

			</div>

			<!-- Financeiro -->
			<div class="tab-pane fade" id="financeiro" role="tabpanel">

				<p class="text-center">Em breve.</p>
				
				<!-- 
				<div class="row">
					<div class="col-md-12">
						<div class="form-group">
							<label>Titulos em aberto</label>
							
							<table class="table">
								<tr>
									<th>Título</th>
									<th>AS</th>
									<th>Venc.</th>
									<th>Valor</th>
									<th>ST</th>
								</tr>
								<tr>
									<td>Exemplo</td>
									<td>Exemplo</td>
									<td>Exemplo</td>
									<td>Exemplo</td>
									<td>Exemplo</td>
								</tr>

								<tr>
									<td>Exemplo</td>
									<td>Exemplo</td>
									<td>Exemplo</td>
									<td>Exemplo</td>
									<td>Exemplo</td>
								</tr>

								<tr>
									<td>Exemplo</td>
									<td>Exemplo</td>
									<td>Exemplo</td>
									<td>Exemplo</td>
									<td>Exemplo</td>
								</tr>
								<tr>
									<td>Exemplo</td>
									<td>Exemplo</td>
									<td>Exemplo</td>
									<td>Exemplo</td>
									<td>Exemplo</td>
								</tr>
							</table>


						</div>
					</div>
				</div>

				-->

			</div>

			<!-- Acerto de contas -->
			<div class="tab-pane fade" id="acerto-de-contas" role="tabpanel">

				<p class="text-center">Em breve.</p>

			</div>

			<!-- Observações -->
			<div class="tab-pane fade" id="observacoes" role="tabpanel">

				<p class="text-center">Em breve.</p>

			</div>

		</div>

		<hr class="margin-top-25 margin-bottom-25" />

		<div class="valores-as-footer">

			<ul>
				<li>
					Valor total da “AS” bruto
					<strong 
						ng-class="{
							'text-danger': as.as_valor_total_bruto < 0,
							'text-primary': as.as_valor_total_bruto >= 0
						}">
						{{ as.as_valor_total_bruto | currency }}
					</strong>
				</li>
				<li>
					Valor líquido à receber
					<strong 
						ng-class="{
							'text-danger': as.as_valor_liquido_receber < 0,
							'text-primary': as.as_valor_liquido_receber >= 0
						}">
						{{ as.as_valor_liquido_receber | currency }}
					</strong>
				</li>
				<li>
					Custos / depesas
					<strong 
						ng-class="{
							'text-danger': as.as_valor_custos_depesas < 0,
							'text-primary': as.as_valor_custos_depesas >= 0
						}">
						{{ as.as_valor_custos_depesas | currency }}
					</strong>
				</li>
				<li>
					Resultado bruto
					<strong 
						ng-class="{
							'text-danger': as.as_valor_resultado_bruto < 0,
							'text-primary': as.as_valor_resultado_bruto >= 0
						}">
						{{ as.as_valor_resultado_bruto | currency }}
					</strong>
				</li>
				<li>
					Resultado líquido
					<strong 
						ng-class="{
							'text-danger': as.as_valor_resultado_liquido < 0,
							'text-primary': as.as_valor_resultado_liquido >= 0
						}">
						{{ as.as_valor_resultado_liquido | currency }}
					</strong>
				</li>
			</ul>

		</div>

		<div class="cadastro-footer margin-top-25">

			<button ng-if="$state.name != 'insert-autorizacao-de-servico'" type="button" class="btn btn-primary"><i class="fa fa-clone" aria-hidden="true"></i> Duplicar</button>

			<button ng-if="$state.name != 'insert-autorizacao-de-servico'" type="button" class="btn btn-primary" ng-click="print_as(id_as)"><i class="fa fa-print" aria-hidden="true"></i> Imprimir</button>

			<a href="/autorizacao-de-servico" class="btn btn-danger"><i class="fa fa-times" aria-hidden="true"></i> Cancelar</a>
				
			<button type="submit" class="btn btn-warning" ng-if="$state.name != 'insert-autorizacao-de-servico'"><i class="fa fa-floppy-o" aria-hidden="true"></i> Alterar</button>

			<button type="submit" class="btn btn-success" ng-if="$state.name == 'insert-autorizacao-de-servico'"><i class="fa fa-floppy-o" aria-hidden="true"></i> Salvar</button>


		</div>


	</form>

</div>